<!-- Profile & Settings Page -->
{% extends 'rider/_base.html' %} {% block title %}Profile & Settings{% endblock
%} {% block content %}
<main class="dashboard-main">
  <section class="dashboard-header">
    <h1>Profile & Settings</h1>
  </section>
  <section class="dashboard-content">
    <div class="shift-status-info">
      <p>
        <strong>Current Shift:</strong>
        <span class="shift-label">{{ shift_label }}</span>
        {% if on_shift %}
        <span class="shift-pill on">On Shift</span>
        {% else %}
        <span class="shift-pill off">Off Shift</span>
        {% endif %}
      </p>
      <p class="shift-hint">
        Update your shift to control which pickups and deliveries appear on your dashboard.
      </p>
    </div>
    <h2 class="section-title">Personal Information</h2>
    <form
      class="profile-form"
      method="post"
      action="{{ url_for('rider.profile_settings') }}"
    >
      <div class="form-group">
        <label for="riderName">Name:</label>
        <input
          type="text"
          id="riderName"
          name="name"
          value="{{ user.username or user.email }}"
        />
      </div>
      <div class="form-group">
        <label for="riderContact">Contact Number:</label>
        <input
          type="tel"
          id="riderContact"
          name="phone"
          value="{{ rider.phone if rider else '' }}"
        />
      </div>
      <div class="form-group">
        <label for="riderEmail">Email:</label>
        <input type="email" id="riderEmail" value="{{ user.email }}" readonly />
      </div>
      <div class="form-group">
        <label for="riderVehicle">Vehicle Type:</label>
        <input
          type="text"
          id="riderVehicle"
          name="vehicle_type"
          value="{{ rider.vehicle_type if rider else '' }}"
        />
      </div>
      <div class="form-group">
        <label for="riderPlate">Plate Number:</label>
        <input
          type="text"
          id="riderPlate"
          name="vehicle_number"
          value="{{ rider.vehicle_number if rider else '' }}"
        />
      </div>
      <div class="form-group">
        <label for="riderLicense">License Number:</label>
        <input
          type="text"
          id="riderLicense"
          name="license_number"
          value="{{ rider.license_number if rider else '' }}"
        />
      </div>
      <div class="form-group">
        <label for="riderShift">Shift Preference:</label>
        <select id="riderShift" name="availability_status">
          {% for value, label in shift_options %}
          <option value="{{ value }}" {% if shift_value == value %}selected{% endif %}>
            {{ label }}
          </option>
          {% endfor %}
        </select>
        <small class="form-hint">Pick "Off Shift" when you are not available for pickups or deliveries.</small>
      </div>
      <button type="submit" class="btn primary-btn">Save Changes</button>
    </form>

    <h2 class="section-title">Account & Security</h2>
    <p>
      To reset your password we will send a secure link to your registered
      email. Click the button below and follow the instructions in the email to
      set a new password.
    </p>
    <form
      class="profile-form"
      method="post"
      action="{{ url_for('rider.profile_settings') }}"
    >
      <input type="hidden" name="action" value="send_reset" />
      <button type="submit" class="btn primary-btn">
        Send Password Reset Email
      </button>
    </form>
  </section>
</main>
{% endblock %} {% block scripts %}
<!-- Add any specific JS for profile/settings here if needed -->
{% endblock %}
