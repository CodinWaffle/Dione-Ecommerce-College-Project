{# nav_items should be passed from the Flask view #} {% if
current_user.is_authenticated and (current_user.role|default('buyer') ==
'buyer') %}
<!-- FULL HEADER FOR LOGGED-IN BUYERS -->
<!--Top Banner-->
<div class="top-banner">
  Get 20% Cash Back <a href="#" onclick="return false;">Click Here</a>
</div>

<!--Header-->
<header class="header">
  <div class="header-container">
    <a href="{{ url_for('main.index') }}" class="logo">DIONE</a>

    <!-- Mobile menu toggle -->
    <input type="checkbox" id="mobile-menu-toggle" class="mobile-menu-toggle" />
    <label for="mobile-menu-toggle" class="hamburger-icon">
      <span></span>
      <span></span>
      <span></span>
    </label>

    <nav class="nav">
      <div class="nav-panel">
        {% for item in nav_items %}
        <div class="nav-item">
          {% if item.dropdown %}
          <!-- Mobile dropdown toggle for this category -->
          <input
            type="checkbox"
            id="dropdown-{{ loop.index }}"
            class="dropdown-toggle"
          />
          <label for="dropdown-{{ loop.index }}" class="nav-link-mobile">
            {{ item.name }}
            <span class="dropdown-arrow">▼</span>
          </label>
          {% endif %}
          <a
            href="{% if item.url %}{{ item.url }}{% else %}#{% endif %}"
            class="nav-link{% if item.bold %} nav-link-bold{% endif %}{% if item.active %} active{% endif %} nav-link-desktop"
            {%
            if
            not
            item.url
            %}onclick="return false;"
            {%
            endif
            %}
          >
            {{ item.name }}
          </a>
          {% if item.dropdown %}
          <!-- Desktop dropdown - full details -->
          <div class="dropdown dropdown-desktop">
            <div class="dropdown-content">
              <div class="dropdown-section">
                {% for category in item.dropdown.categories %}
                <div class="dropdown-list">
                  <li>
                    <a
                      href="#"
                      class="category-link"
                      data-category="{{ category|lower|replace(' ', '-') }}"
                      data-category-label="{{ category }}"
                      data-nav="{{ item.name|lower }}"
                      onclick="return false;"
                      >{{ category }}</a
                    >
                  </li>
                </div>
                {% endfor %}
                <div class="shop-all-link">
                  <a
                    href="{% if item.url %}{{ item.url }}{% else %}#{% endif %}"
                    {%
                    if
                    not
                    item.url
                    %}onclick="return false;"
                    {%
                    endif
                    %}
                  >
                    SHOP ALL {{ item.name|upper }}
                    <span>→</span>
                  </a>
                </div>
              </div>
              {% for section in item.dropdown.sections %}
              <div class="dropdown-section">
                {% if section.title %}
                <div
                  class="dropdown-header"
                  id="category-section-title-{{ item.name|lower }}"
                >
                  {{ section.title }}
                  <span>→</span>
                </div>
                {% endif %}
                <ul
                  class="dropdown-list"
                  data-section-title="{{ section.title|lower }}-{{ item.name|lower }}"
                >
                  {% for subitem in section.subitems %}
                  <li><a href="#" onclick="return false;">{{ subitem }}</a></li>
                  {% endfor %}
                </ul>
              </div>
              {% endfor %} {% if item.dropdown.promo %}
              <div class="dropdown-section">
                <div class="promo-section">
                  <h3>{{ item.dropdown.promo.title }}</h3>
                  <p><strong>{{ item.dropdown.promo.subtitle }}</strong></p>
                  <p>{{ item.dropdown.promo.description }}</p>
                  <button class="promo-btn">
                    {{ item.dropdown.promo.button }} →
                  </button>
                </div>
              </div>
              {% endif %}
            </div>
          </div>
          <!-- Mobile dropdown - simplified -->
          <div class="dropdown dropdown-mobile">
            <div class="dropdown-content">
              <div class="dropdown-section">
                {% for category in item.dropdown.categories %}
                <div class="dropdown-list">
                  <li>
                    <a
                      href="#"
                      class="category-link"
                      data-category="{{ category|lower|replace(' ', '-') }}"
                      data-category-label="{{ category }}"
                      data-nav="{{ item.name|lower }}"
                      onclick="return false;"
                      >{{ category }}</a
                    >
                  </li>
                </div>
                {% endfor %}
                <div class="shop-all-link">
                  <a
                    href="{% if item.url %}{{ item.url }}{% else %}#{% endif %}"
                    {%
                    if
                    not
                    item.url
                    %}onclick="return false;"
                    {%
                    endif
                    %}
                  >
                    SHOP ALL {{ item.name|upper }}
                    <span>→</span>
                  </a>
                </div>
              </div>
            </div>
          </div>
          {% endif %}
        </div>
        {% endfor %}
      </div>
    </nav>

    <div class="header-actions">
      <div class="search-container">
        <input
          type="text"
          class="search-input"
          placeholder="Search for products..."
        />
        <span class="search-icon">
          <!-- Lucide Search Icon -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="11" cy="11" r="8" />
            <line x1="21" y1="21" x2="16.65" y2="16.65" />
          </svg>
        </span>
      </div>

      <!-- Cart Icon -->
      <a
        href="#"
        class="icon-btn cart-btn-header"
        aria-label="Shopping Bag"
        onclick="return false;"
      >
        <!-- Shopping Bag Icon -->
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M6 2l3 6v8a2 2 0 002 2h2a2 2 0 002-2V8l3-6" />
          <path d="M5 8h14l-1 13H6L5 8z" />
          <path d="M10 10v4" />
          <path d="M14 10v4" />
        </svg>
        <span class="cart-count">{{ cart_count|default(0) }}</span>
      </a>

      <!-- Heart Icon -->
      <button class="icon-btn" aria-label="Wishlist">
        <!-- Lucide Heart Icon -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
          />
        </svg>
      </button>

      <!-- Profile Icon -->
      <div class="profile-dropdown-wrapper">
        <button
          class="icon-btn profile-btn"
          id="profileBtn"
          aria-haspopup="true"
          aria-expanded="false"
          aria-label="Profile"
        >
          <!-- Lucide User Icon -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="12" cy="8" r="4" />
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
          </svg>
        </button>
        <div class="profile-dropdown" id="profileDropdown">
          <a href="#" class="profile-dropdown-item" onclick="return false;"
            >My Account</a
          >
          <a href="#" class="profile-dropdown-item" onclick="return false;"
            >My Purchases</a
          >
          <a
            href="{{ url_for('auth.logout') }}"
            class="profile-dropdown-item logout-item"
            >Logout</a
          >
        </div>
      </div>
    </div>
  </div>
</header>

<!-- Load Header JavaScript -->
<script src="{{ url_for('static', filename='js/buyer_scripts/partials/_header_buyer.js') }}"></script>

{% else %}
<!-- SIMPLE HEADER FOR NON-LOGGED-IN USERS -->
<!--Top Banner-->
<div class="top-banner">
  Get 20% Cash Back <a href="#" onclick="return false;">Click Here</a>
</div>

<!--Header-->
<header class="header-simple">
  <div class="header-container-simple">
    <a href="{{ url_for('main.index') }}" class="logo">DIONE</a>

    <!-- Auth Navigation for Non-Logged-In Users -->
    <nav class="auth-nav">
      <a href="{{ url_for('main.index') }}" class="auth-nav-link">Home</a>
      <a href="{{ url_for('auth.login') }}" class="auth-nav-link">Login</a>
      <a href="{{ url_for('auth.signup') }}" class="auth-nav-link">Signup</a>
    </nav>
  </div>
</header>

{% endif %}
