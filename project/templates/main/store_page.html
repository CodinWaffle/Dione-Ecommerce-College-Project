<!DOCTYPE html>
{# store_page.html - buyer storefront stub with buyer header/footer and buyer
CSS included #}
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Elegant Boutique - Premium Store</title>

    {# Buyer CSS - include main homepage styles and buyer layout if available #}
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/buyer_styles/homepage.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/buyer_styles/partials/_header_buyer.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/buyer_styles/buyer.css') }}"
    />

    <style>
      /* keep local overrides here to make the profile-card and content area banner-sized */
      :root {
        --banner-height: 300px;
      }
      * {
        box-sizing: border-box;
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Arial, sans-serif;
        background: #f9fafb;
        color: #222;
        margin: 0;
      }

      /* Banner (full width) */
      .banner {
        width: 100vw;
        height: var(--banner-height);
        margin-left: calc(-50vw + 50%);
        /* purple gradient used across the project */
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        position: relative;
        overflow: hidden;
      }

      /* subtle texture */
      .banner::after {
        content: "";
        position: absolute;
        inset: 0;
        background-image: linear-gradient(
          0deg,
          rgba(255, 255, 255, 0.03),
          transparent
        );
      }

      /* Container centers content but for this storefront we let it overlap like marketplace pages */
      .container {
        /* Responsive container: center content, cap max width, and
           use clamp() for adjustable side padding that responds to viewport */
        width: 100%;
        max-width: 1200px;
        margin: calc(-1 * var(--banner-height) / 2) auto 40px;
        padding: 0 clamp(16px, 4vw, 64px);
        position: relative;
        z-index: 10;
      }

      /* Make the profile card the same height as the banner and full-width look inside the centered container */
      .profile-card {
        /* glassmorphism */
        background: rgba(255, 255, 255, 0.55);
        backdrop-filter: blur(8px) saturate(120%);
        -webkit-backdrop-filter: blur(8px) saturate(120%);
        border: 1px solid rgba(118, 75, 162, 0.12);
        border-radius: 12px;
        padding: 18px;
        box-shadow: 0 8px 30px rgba(30, 30, 60, 0.08);
        display: flex;
        align-items: center;
        gap: 20px;
        height: var(--banner-height);
        overflow: hidden;
      }

      .profile-pic {
        width: 160px;
        height: 160px;
        border-radius: 50%;
        overflow: hidden;
        flex-shrink: 0;
        border: 6px solid #fff;
      }
      .profile-pic img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .store-details {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .store-name {
        font-size: 28px;
        font-weight: 700;
        color: #111;
      }
      .store-location {
        color: #666;
        font-weight: 500;
      }

      /* content area below the profile-card; keep same banner height so it reads like a large hero-sized content block */
      .content-area {
        background: #fff;
        border-radius: 12px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 10px 30px rgba(2, 6, 23, 0.06);
        min-height: var(--banner-height);
        height: auto;
        display: block;
      }

      /* responsive tweaks */
      @media (max-width: 768px) {
        :root {
          --banner-height: 240px;
        }
        .profile-card {
          height: var(--banner-height);
          padding: 12px;
        }
        .profile-pic {
          width: 120px;
          height: 120px;
        }
      }
      @media (max-width: 480px) {
        :root {
          --banner-height: 180px;
        }
        .container {
          margin: -90px auto 20px;
          padding: 0 12px;
        }
        .profile-card {
          flex-direction: column;
          height: var(--banner-height);
          align-items: center;
          text-align: center;
        }
        .profile-pic {
          width: 96px;
          height: 96px;
        }
      }
    </style>
  </head>
  <body>
    {# Include plain original header (non-auth) #} {% include
    'main/partials/_header_buyer.html' %}

    <!-- Full-width banner at top -->
    <div class="banner" aria-hidden="true"></div>

    <!-- Container with overlapping profile card -->
    <div class="container">
      <div class="profile-card">
        <div class="profile-pic" aria-hidden="true">
          <img
            src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=160&h=160&fit=crop"
            alt="Store Logo"
          />
        </div>

        <div class="store-details">
          <h1 class="store-name">Elegant Boutique</h1>
          <div class="store-location">üìç South Luzon</div>
          <div
            class="rating-section"
            style="margin-top: 8px; color: #f39c12; font-weight: 600"
          >
            ‚òÖ ‚òÖ ‚òÖ ‚òÖ ‚òÖ
            <span style="color: #666; font-weight: 500; margin-left: 8px"
              >(4.8)</span
            >
          </div>
          <div
            class="store-stats"
            style="
              display: flex;
              gap: 18px;
              margin-top: 8px;
              align-items: center;
            "
          >
            <div style="text-align: center">
              <div style="font-weight: 800; color: #111; font-size: 18px">
                {{ products_sold_display or '1.2K' }}
              </div>
              <div style="color: #666; font-size: 13px">Products Sold</div>
            </div>
            <div style="text-align: center">
              <div style="font-weight: 800; color: #111; font-size: 18px">
                {{ followers_display or '8.5K' }}
              </div>
              <div style="color: #666; font-size: 13px">Followers</div>
            </div>
          </div>
        </div>

        <div
          class="store-actions"
          style="
            margin-left: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: flex-end;
          "
        >
          <button
            class="btn btn-follow"
            id="followBtn"
            onclick="toggleFollow()"
            style="
              display: flex;
              align-items: center;
              gap: 10px;
              padding: 12px 22px;
              border-radius: 10px;
              border: none;
              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
              color: #fff;
              font-weight: 700;
              font-size: 16px;
            "
            aria-label="Follow store"
          >
            <!-- Outline plus icon -->
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              style="flex-shrink: 0"
            >
              <line x1="12" y1="5" x2="12" y2="19"></line>
              <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
            <span>Follow</span>
          </button>

          <button
            class="btn btn-chat"
            onclick="handleChat()"
            style="
              display: flex;
              align-items: center;
              gap: 10px;
              padding: 12px 22px;
              border-radius: 10px;
              border: 2px solid #667eea;
              background: #fff;
              color: #667eea;
              font-weight: 700;
              font-size: 16px;
            "
            aria-label="Chat with store"
          >
            <!-- Outline chat icon -->
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              style="flex-shrink: 0"
            >
              <path
                d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"
              ></path>
            </svg>
            <span>Chat</span>
          </button>
        </div>
      </div>

      {# call the content area below here #} {% block content_area %} {#
      Featured carousel (same height as banner) #}
      <div
        class="content-area carousel-area"
        style="position: relative; padding: 0; overflow: hidden"
      >
        <div
          class="carousel"
          style="
            display: flex;
            transition: transform 0.45s ease;
            height: var(--banner-height);
            width: 100%;
          "
          id="storeCarousel"
        >
          <div
            class="carousel-slide"
            style="min-width:100%;height:var(--banner-height);background-size:cover;background-position:center;background-image:url({{ url_for('static', filename='images/banner_1.jpg') }})"
          ></div>
          <div
            class="carousel-slide"
            style="min-width:100%;height:var(--banner-height);background-size:cover;background-position:center;background-image:url({{ url_for('static', filename='images/banner_2.jpg') }})"
          ></div>
          <div
            class="carousel-slide"
            style="min-width:100%;height:var(--banner-height);background-size:cover;background-position:center;background-image:url({{ url_for('static', filename='images/banner_3.jpg') }})"
          ></div>
        </div>

        <!-- Arrows -->
        <button
          id="carouselPrev"
          aria-label="Previous"
          style="
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.8);
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
            cursor: pointer;
          "
        >
          <svg
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <polyline points="15,18 9,12 15,6"></polyline>
          </svg>
        </button>
        <button
          id="carouselNext"
          aria-label="Next"
          style="
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.8);
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
            cursor: pointer;
          "
        >
          <svg
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <polyline points="9,18 15,12 9,6"></polyline>
          </svg>
        </button>

        <!-- Dots -->
        <div
          id="carouselDots"
          style="
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            bottom: 12px;
            display: flex;
            gap: 8px;
          "
        ></div>

        <!-- Product listing inside the content area -->
        <div class="products-listing" style="margin-top: 18px; width: 100%">
          {% include 'main/partials/content_area.html' %}
        </div>
      </div>

      {% endblock %}
    </div>

    {# Include buyer footer partial and ensure its CSS is loaded by the global
    buyer css files above #} {% include 'main/partials/_footer.html' %}

    <script>
      function toggleFollow() {
        const btn = document.getElementById("followBtn");
        if (btn.classList.contains("following")) {
          btn.classList.remove("following");
          btn.innerHTML = "+ Follow";
        } else {
          btn.classList.add("following");
          btn.innerHTML = "‚úì Following";
        }
      }
      function handleChat() {
        alert("üí¨ Opening chat with Elegant Boutique...");
      }
      // Simple carousel behavior: auto-advance, arrows and dots
      document.addEventListener("DOMContentLoaded", function () {
        const carousel = document.getElementById("storeCarousel");
        if (!carousel) return;
        const slides = carousel.querySelectorAll(".carousel-slide");
        const prev = document.getElementById("carouselPrev");
        const next = document.getElementById("carouselNext");
        const dotsWrap = document.getElementById("carouselDots");
        let idx = 0;
        const total = slides.length;
        let timer = null;

        function render() {
          carousel.style.transform = "translateX(" + -idx * 100 + "%)";
          // refresh dots
          if (!dotsWrap) return;
          dotsWrap.innerHTML = "";
          for (let i = 0; i < total; i++) {
            const d = document.createElement("button");
            d.className = "dot";
            d.style.width = "10px";
            d.style.height = "10px";
            d.style.borderRadius = "50%";
            d.style.border = "none";
            d.style.background = i === idx ? "#764ba2" : "rgba(0,0,0,0.18)";
            d.style.cursor = "pointer";
            d.onclick = (function (n) {
              return function () {
                idx = n;
                render();
                resetTimer();
              };
            })(i);
            dotsWrap.appendChild(d);
          }
        }

        function prevSlide() {
          idx = (idx - 1 + total) % total;
          render();
          resetTimer();
        }
        function nextSlide() {
          idx = (idx + 1) % total;
          render();
          resetTimer();
        }

        if (prev) prev.addEventListener("click", prevSlide);
        if (next) next.addEventListener("click", nextSlide);

        function startTimer() {
          timer = setInterval(function () {
            idx = (idx + 1) % total;
            render();
          }, 5000);
        }
        function resetTimer() {
          if (timer) clearInterval(timer);
          startTimer();
        }

        render();
        startTimer();

        // pause on hover
        carousel.addEventListener("mouseenter", function () {
          if (timer) clearInterval(timer);
        });
        carousel.addEventListener("mouseleave", function () {
          resetTimer();
        });
      });
    </script>
  </body>
</html>
