<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Order Confirmed - Dione</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/buyer_styles/order_success.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/buyer_styles/partials/_header_buyer.css') }}"
    />
  </head>
  <body>
    {% include 'main/partials/_header_buyer.html' %}

    <main class="success-container">
      <section class="success-card">
        <div class="success-icon">
          <i data-lucide="sparkles"></i>
        </div>
        <h1>Thank you for your purchase!</h1>
        <p class="success-message">
          Your order has been placed successfully. We emailed a confirmation and
          we'll keep you posted once it ships.
        </p>

        <div class="summary-panel">
          <div class="summary-item">
            <span class="summary-label">Order number</span>
            <span class="summary-value">{{ order_summary.order_number }}</span>
          </div>
          <div class="summary-item">
            <span class="summary-label">Items</span>
            <span class="summary-value">{{ order_summary.items_count }}</span>
          </div>
          <div class="summary-item">
            <span class="summary-label">Subtotal</span>
            <span class="summary-value"
              >₱{{ '%.2f'|format(order_summary.subtotal|default(0)) }}</span
            >
          </div>
          <div class="summary-item">
            <span class="summary-label">Delivery fee</span>
            <span class="summary-value">
              {% if order_summary.delivery_fee == 0 %}
              <span class="summary-value">FREE</span>
              {% else %} ₱{{ '%.2f'|format(order_summary.delivery_fee) }} {%
              endif %}
            </span>
          </div>
          <div class="summary-item">
            <span class="summary-label">Total</span>
            <span class="summary-value summary-total"
              >₱{{ '%.2f'|format(order_summary.total|default(0)) }}</span
            >
          </div>
          <div class="summary-item">
            <span class="summary-label">Estimated delivery</span>
            <span class="summary-value"
              >{{ order_summary.estimated_delivery or '3-5 business days'
              }}</span
            >
          </div>
        </div>

        <!-- Order Items Section -->
        {% if order_summary.order_items %}
        <div
          class="order-items-section"
          style="margin: 30px 0; text-align: left"
        >
          <h3 style="margin-bottom: 20px; color: #333">Order Items</h3>
          {% for item in order_summary.order_items %}
          <div
            class="order-item"
            style="
              display: flex;
              align-items: center;
              padding: 15px;
              border: 1px solid #eee;
              border-radius: 8px;
              margin-bottom: 10px;
              background: #fafafa;
            "
          >
            <div
              class="item-image"
              style="width: 60px; height: 60px; margin-right: 15px"
            >
              <img
                src="{{ item.product_image if item.product_image else url_for('static', filename='images/default-product.jpg') }}"
                alt="{{ item.product_name }}"
                style="
                  width: 100%;
                  height: 100%;
                  object-fit: cover;
                  border-radius: 4px;
                "
              />
            </div>
            <div class="item-details" style="flex: 1">
              <h4 style="margin: 0 0 5px 0; font-size: 16px; color: #333">
                {{ item.product_name }}
              </h4>
              {% if item.variant_name %}
              <p style="margin: 0 0 5px 0; color: #666; font-size: 14px">
                {{ item.variant_name }}
              </p>
              {% endif %}
              <p style="margin: 0; color: #666; font-size: 14px">
                Quantity: {{ item.quantity }}
              </p>
            </div>
            <div
              class="item-price"
              style="font-weight: 600; color: #333; font-size: 16px"
            >
              ₱{{ '%.2f'|format(item.total_price) }}
            </div>
          </div>
          {% endfor %}
        </div>
        {% endif %}

        <div class="action-buttons">
          <a class="action-primary" href="{{ url_for('main.my_purchases') }}">
            Track my order
          </a>
          <a class="action-secondary" href="{{ url_for('main.index') }}">
            Continue shopping
          </a>
        </div>
      </section>
    </main>

    <script>
      if (window.lucide) {
        lucide.createIcons();
      }
    </script>
  </body>
</html>
