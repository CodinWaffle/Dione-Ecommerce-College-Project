{% extends "base.html" %}
{% block content %}
<div class="row mt-4">
  <div class="col-12">
    <div class="card shadow-sm mb-4">
      <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
        <h4 class="mb-0">Store Analytics</h4>
        <a class="btn btn-sm btn-outline-light" href="{{ url_for('seller.store_profile') }}">Edit Profile</a>
      </div>
      <div class="card-body">
        <div class="row text-center">
          <div class="col-md-3 mb-3">
            <h6 class="text-muted">Products</h6>
            <h3>{{ metrics.total_products }}</h3>
          </div>
          <div class="col-md-3 mb-3">
            <h6 class="text-muted">Total Orders</h6>
            <h3>{{ metrics.total_orders }}</h3>
          </div>
          <div class="col-md-3 mb-3">
            <h6 class="text-muted">Revenue</h6>
            <h3>₱{{ '%.2f'|format(metrics.total_revenue) }}</h3>
          </div>
          <div class="col-md-3 mb-3">
            <h6 class="text-muted">Avg. Rating</h6>
            <h3>{{ '%.1f'|format(metrics.average_rating) }}</h3>
            <small>{{ metrics.review_count }} reviews</small>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-12">
    <div class="card shadow-sm">
      <div class="card-header bg-light">
        <div class="d-flex justify-content-between align-items-center">
          <h5 class="mb-0">Active Catalog</h5>
          <span class="text-muted">{{ catalog|length }} Products</span>
        </div>
      </div>
      <div class="table-responsive">
        <table class="table mb-0">
          <thead>
            <tr>
              <th>Name</th>
              <th>Price</th>
              <th>Stock</th>
              <th>Featured</th>
              <th>Last Updated</th>
            </tr>
          </thead>
          <tbody>
            {% for product in catalog %}
            <tr>
              <td>{{ product.name }}</td>
              <td>₱{{ '%.2f'|format(product.price) }}</td>
              <td>{{ product.stock }}</td>
              <td>
                {% if product.is_featured %}
                  <span class="badge badge-success">Featured</span>
                {% else %}
                  <span class="badge badge-secondary">Standard</span>
                {% endif %}
              </td>
              <td>{{ product.updated_at.strftime('%Y-%m-%d') if product.updated_at }}</td>
            </tr>
            {% else %}
            <tr>
              <td colspan="5" class="text-center text-muted py-4">No active products yet.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}
